# 历史记录功能说明

## 功能概述

新增的历史记录功能可以自动保存所有生成的文章，方便用户随时查看、搜索和重新加载之前生成的内容。

## 主要功能

### 1. 自动保存历史
- **生成文章时自动保存**：每次生成新文章时，系统会自动保存到历史记录
- **优化文章时自动保存**：优化后的文章会作为新版本保存
- **续写文章时自动保存**：续写后的完整文章会保存到历史记录

### 2. 历史记录查看
点击界面右上角的"历史记录"按钮，可以打开历史记录对话框，查看所有保存的文章。

每条历史记录包含：
- 文章主题
- 生成时间
- 文章风格和长度
- 字数统计
- 文章预览（前200字）
- 关键要点标签

### 3. 搜索与筛选

**搜索功能**：
- 支持按主题、内容关键词搜索
- 实时搜索，即时显示结果

**筛选功能**：
- 按文章风格筛选（专业严谨、轻松活泼等）
- 按文章长度筛选（短文、中篇、长文）
- 按日期范围筛选

### 4. 历史记录管理

**查看文章**：
- 点击"预览"按钮，在弹窗中查看完整文章
- 支持 Markdown 渲染，格式美观

**加载文章**：
- 点击"加载"按钮，将历史文章加载到编辑器
- 同时加载文章参数（主题、风格、长度等）

**删除记录**：
- 支持单个删除
- 支持批量选中删除
- 支持清空全部历史记录

**导出历史**：
- 可将所有历史记录导出为 JSON 文件
- 方便备份和迁移

### 5. 统计信息

历史记录对话框顶部显示统计信息：
- 总文章数量
- 总字数统计
- 近7天生成的文章数量

## 技术实现

### 核心文件

1. **`src/services/historyService.js`** - 历史记录服务
   - 提供历史记录的增删改查功能
   - 支持搜索、筛选、导出等高级功能
   - 使用 localStorage 持久化存储

2. **`src/components/HistoryDialog.vue`** - 历史记录对话框组件
   - 提供友好的用户界面
   - 支持全屏模式
   - 实现搜索、筛选、预览等交互

3. **`src/components/ArticleGenerator.vue`** - 主组件集成
   - 在生成、优化、续写文章时自动保存
   - 提供历史记录入口按钮

### 数据存储

历史记录保存在浏览器的 localStorage 中，每条记录包含：

```javascript
{
  id: 时间戳,
  timestamp: ISO格式时间,
  topic: '文章主题',
  content: '文章内容',
  style: '文章风格',
  length: '文章长度',
  targetAudience: '目标读者',
  keyPoints: ['关键要点1', '关键要点2'],
  additionalRequirements: '其他要求',
  wordCount: 字数,
  preview: '预览文本（200字）'
}
```

### 存储限制

- 默认最多保存 100 条历史记录
- 超过限制时自动删除最旧的记录
- 可在 `historyService.js` 中修改 `maxHistoryItems` 调整限制

## 使用建议

1. **定期导出历史**：建议定期导出历史记录作为备份
2. **清理旧记录**：可以删除不需要的历史记录，节省存储空间
3. **搜索技巧**：使用关键词搜索可以快速找到需要的文章
4. **日期筛选**：配合日期范围筛选，可以快速定位特定时期的文章

## 注意事项

1. 历史记录保存在浏览器本地，清除浏览器数据会丢失历史记录
2. 更换浏览器或设备后需要重新导入历史记录
3. localStorage 有容量限制（通常5-10MB），建议定期清理旧记录
4. 导出的 JSON 文件可以在其他设备上导入使用

## 未来优化方向

1. 支持云端同步历史记录
2. 添加文章版本对比功能
3. 支持标签分类管理
4. 提供更多统计图表
5. 支持历史记录搜索高亮
